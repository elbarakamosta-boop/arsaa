<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>أمانة الشباب</title>
        <link rel="icon" type="image/png" href="images/logo.png" />
    <link rel="stylesheet" href="css/styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <style>
      .container {
        max-width: 100%;
        padding: 20px;
      }
      
      .goals-container {
        background: white;
        border-radius: 10px;
        padding: 25px;
        box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        width: 95%;
        max-width: 1400px;
      }
      
      .goals-form {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 25px;
      }
      
      .goals-form input {
        padding: 12px 15px;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-family: 'Tajawal', sans-serif;
        font-size: 15px;
        transition: border-color 0.3s;
      }
      
      .goals-form input:focus {
        outline: none;
        border-color: #026e3a;
        box-shadow: 0 0 0 2px hsla(151, 96%, 22%, 0.2);
      }
      
      .add-goal-btn {
        background: #026e3a;
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 6px;
        cursor: pointer;
        font-family: 'Tajawal', sans-serif;
        font-weight: 500;
        font-size: 15px;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }
      
      .add-goal-btn:hover {
        background: #026133;
        transform: translateY(-1px);
      }
      
      .goals-table-container {
        width: 100%;
        max-height: 500px; /* Fixed height for the container */
        overflow: auto; /* Enable both vertical and horizontal scrolling */
        margin-top: 20px;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }
      
      .goals-table {
        width: 100%;
        border-collapse: collapse;
        min-width: 100%; /* Make table at least as wide as its container */
        table-layout: fixed; /* Helps with consistent column widths */
      }
      
      .goals-table th, 
      .goals-table td {
        padding: 14px 16px;
        text-align: center;
        border: 1px solid #e0e0e0;
        transition: background-color 0.2s;
      }
      
      .goals-table th {
        background-color: #f0f7ff;
        font-weight: 600;
        color: #026e3a;
        white-space: nowrap;
      }
      
      .goals-table tr:nth-child(even) {
        background-color: #f8fafc;
      }
      
      .goals-table tr:hover {
        background-color: #f1f8ff;
      }
      
      .action-buttons {
        display: flex;
        gap: 8px;
        justify-content: center;
      }
      
      .edit-btn, .delete-btn {
        padding: 6px 12px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-family: 'Tajawal', sans-serif;
        font-size: 13px;
        display: inline-flex;
        align-items: center;
        gap: 5px;
        transition: all 0.2s;
      }
      
      .edit-btn {
        background-color: #fdc116;
        color: #000;
      }
      
      .edit-btn:hover {
        background-color: #fdc116;
      }
      
      .delete-btn {
        background-color: #f44336;
        color: white;
      }
      
      .delete-btn:hover {
        background-color: #d32f2f;
      }
      
      .save-btn {
        background-color: #4caf50;
        color: white;
      }
      
      .save-btn:hover {
        background-color: #388e3c;
      }
      
      .cancel-btn {
        background-color: #9e9e9e;
        color: white;
      }
      
      .cancel-btn:hover {
        background-color: #757575;
      }
      
      .editable {
        background-color: #fffde7 !important;
        border: 1px solid #fdc116 !important;
        padding: 8px 10px !important;
        border-radius: 4px;
      }
      
      .main-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        min-height: 100vh;
        width: 100%;
      }
      
      h2 {
        color: #026e3a;
        margin-bottom: 20px;
        font-size: 24px;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      
      h3 {
        color: #026e3a;
        margin: 25px 0 15px;
        font-size: 20px;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .continairete{max-width:auto;margin:0 auto}
      header{position: fixed;display:flex;background-color: white;width: 100%;align-items:center;justify-content:space-between;
  width: 100%;
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  padding: 20px 20px 0px 30px; /* الأعلى والأسفل 10px — اليمين واليسار 20px */
  box-sizing: border-box; /* مهم لمنع التمدد خارج الشاشة */
}


      h1{font-size:20px;margin:0}
      p.lead{margin:0;color:var(--muted)}
      .carta{border-radius:12px;padding:18px}
      ol.agendate{padding-left:18px;margin:0}
      ol.agendate li{padding:12px 10px;border-radius:8px;margin-bottom:10px;background:linear-gradient(90deg, rgba(11,94,215,0.04), transparent);}
      .actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
      .btn{padding:8px 12px;border-radius:8px;border:0;cursor:pointer}
      .btn.primary{background:var(--accent);color:#fff}
      .btn.ghost{background:transparent;border:1px solid #e6eefc;color:var(--accent)}
      
      /* Back button styles */
      .back-button {
        background: linear-gradient(135deg, #026e3a, #059b53);
        color: white;
        border: none;
        padding: 8px 20px;
        border-radius: 25px;
        font-family: 'Tajawal', sans-serif;
        font-weight: 500;
        font-size: 14px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }
      
      .back-button:hover {
        background: linear-gradient(135deg, #025f32, #03743d);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      }
      
      
      .back-button i {
        transition: transform 0.3s ease;
      }
      
      .back-button:hover i {
        transform: translateX(-3px);
      }

html,
body {
    max-width: 100%;
    overflow-x: hidden;
}
      
@media (max-width: 1024px) {
    .main-content {
        margin-top: 35px !important;
    }
    .profile-pic {
        margin-right: 20px; /* يقرب الصورة من النص */
        margin-left: 20px; /* يقرب الصورة من النص */
    }
}

@media (max-width: 766px) {
    .main-content {
        margin-top: -175px !important;
    }
}
@media (max-width: 581px) {
    .main-content {
        margin-top: -90px !important;
    }
}
  @media (max-width: 366px) {
      .main-content {
          margin-top: -125px !important;
      }
  }
  @media (max-width: 222px) {
    .main-content {
        margin-top: -36px !important;
    }
}


      /* تنسيقات الجدول للشاشات الصغيرة */
      @media (max-width: 1024px) {
        .goals-table {
          display: block;
          width: 100%;
          max-width: 100%;
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
          white-space: nowrap;
          position: relative;
          border: 1px solid #e0e0e0;
          border-radius: 8px;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .goals-table table {
          width: 100%;
          margin: 0;
          border-collapse: collapse;
          min-width: 800px; /* عرض أدنى للجدول قبل ظهور شريط التمرير */
        }
        
        .goals-table thead {
          background-color: #f5f5f5;
          position: sticky;
          top: 0;
          z-index: 10;
        }
        
        .goals-table th,
        .goals-table td {
          padding: 12px 15px;
          text-align: right;
          border-bottom: 1px solid #e0e0e0;
          white-space: nowrap;
        }
        
        .goals-table tbody tr:hover {
          background-color: #f9f9f9;
        }
        
        .container {
          padding: 10px;
          width: 100%;
          box-sizing: border-box;
        }
        
        .goals-container {
          width: 100%;
          padding: 15px;
          box-sizing: border-box;
          overflow: hidden;
        }
        
        .goals-form {
          grid-template-columns: 1fr;
          width: 100%;
        }
      }
          .profile-pic {
        margin-right: 20px; /* يقرب الصورة من النص */
        margin-left: 20px; /* يقرب الصورة من النص */
    }
    </style>
  </head>
  <body>
    <script>
      const currentUser = JSON.parse(
        sessionStorage.getItem("currentUser") ||
          localStorage.getItem("rememberedUser")
      );
      if (!currentUser) {
        window.location.href = "login.html";
      }
    </script>
    <script src="js/users.js"></script>
    <div class="container">
      <header>
        <div class="logo-container">
          <img src="images/logo.png" alt="شعار الجمعية" class="logo" />
          <div class="header-text">
            <h1>جمعية البركة للعمل الخيري والانساني</h1>
            <div class="user-controls">
              <span id="userGreeting">مرحباً، <span id="userName"></span></span>
              <button id="logoutBtn" class="logout-btn">
                <i class="fas fa-sign-out-alt"></i> تسجيل الخروج
              </button>
            </div>
          </div>
        </div>
        <button onclick="window.location.href='index.html'" class="back-button" style="margin-right: 20px;">
          <i class="fas fa-arrow-right"></i> العودة للصفحة الرئيسية
        </button>
      </header>

      <div class="main-content">

      <div class="goals-container" style="display: flex;">

        <!-- الصورة في اليمين -->
        <div class="profile-pic" style="flex-shrink: 0;">
          <img id="userAvatar" src="images/profiles/7.png" 
              alt="صورة" 
              style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover;">
        </div>



        <!-- النص في اليسار -->
        <div class="info" style="flex: 1;">
          <h2 style="margin: 0;" id="name"></h2>
          <h3 style="color: #666; margin-top: 5px;" id="position"></h3>
        </div>
        <script>
            document.getElementById("name").textContent = users[6].name;
            document.getElementById("position").textContent = users[6].position;
        </script>


      </div>


          <div class="goals-container"> 
            <h3><i class="fas fa-check-double"></i> المهام</h3>
          
                <div class="continairete">
      <section class="carta">
        <ol class="agendate">
          <li>
            <strong>تأطير مبادرات الشباب و إبداعاتهم و ترقيتها</strong>
          </li>
          <li>
            <strong>تدريب و تأهيل الشباب على العمل التضامني و الإغاثي</strong>
          </li>

          <li>
            <strong>التسويق الإعلامي لأهداف الجمعية و نشاطاتها في مختلف وسائل التواصل</strong>
          </li>
          <li>
            <strong>تغطية نشاطات الجمعية ولائيا</strong>
          </li>

        </ol>

        <div class="actions">
          <button class="btn primary" onclick="window.print()">طباعة</button>
          <button class="btn ghost" onclick="copyToClipboard()">نسخ النص</button>
        </div>

        <script>
          // عرض التاريخ الحالي (هجري/ميلادي حسب المتصفح) - هنا ميلادي
          const dateEl = document.getElementById('date');
          const today = new Date();
          dateEl.textContent = today.toLocaleDateString('ar-DZ');

          function copyToClipboard(){
            try {
              // First try to find agenda items
              const agendaItems = document.querySelectorAll('.agenda-item');
              if (agendaItems.length === 0) {
                // If no agenda items found, try to find any list items in the current section
                const section = document.querySelector('section');
                if (section) {
                  const items = [];
                  const listItems = section.querySelectorAll('li');
                  
                  listItems.forEach(li => {
                    if (li.textContent.trim()) {
                      items.push(li.textContent.trim());
                    }
                  });
                  
                  if (items.length > 0) {
                    return copyTextToClipboard(items.join('\n\n'));
                  }
                }
                throw new Error('لا توجد عناصر للنسخ');
              }
              
              // Process agenda items if found
              const items = [];
              agendaItems.forEach(item => {
                const title = item.querySelector('h4, h3, h2, h1, strong, b')?.textContent?.trim() || '';
                const description = item.querySelector('p, div')?.textContent?.trim() || '';
                const time = item.querySelector('time, .time, .date')?.textContent?.trim() || '';
                
                if (title || description) {
                  const itemText = [title];
                  if (time) itemText.push(time);
                  if (description) itemText.push(description);
                  items.push(itemText.join('\n'));
                }
              });
              
              if (items.length === 0) {
                throw new Error('لا توجد نصوص للنسخ');
              }
              
              return copyTextToClipboard(items.join('\n\n'));
            } catch (error) {
              console.error('Error in copyToClipboard:', error);
              alert('حدث خطأ: ' + (error.message || 'تعذر الوصول إلى الحافظة'));
              return false;
            }
          }
          
          // Helper function to handle the actual copying with fallback
          function copyTextToClipboard(text) {
            // Try modern clipboard API first
            if (navigator.clipboard && window.isSecureContext) {
              return navigator.clipboard.writeText(text)
                .then(() => {
                  showSuccessMessage('تم نسخ النص إلى الحافظة');
                  return true;
                })
                .catch(err => {
                  console.error('Clipboard API error:', err);
                  return copyWithExecCommand(text);
                });
            } else {
              // Fallback for non-secure contexts or older browsers
              return copyWithExecCommand(text);
            }
          }
          
          function copyWithExecCommand(text) {
            return new Promise((resolve) => {
              try {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';  // Prevent scrolling to bottom
                textarea.style.opacity = '0';       // Make it invisible
                document.body.appendChild(textarea);
                
                // Select and copy
                textarea.select();
                textarea.setSelectionRange(0, 99999); // For mobile devices
                
                const success = document.execCommand('copy');
                document.body.removeChild(textarea);
                
                if (success) {
                  showSuccessMessage('تم نسخ النص إلى الحافظة');
                  resolve(true);
                } else {
                  showErrorMessage('تعذر الوصول إلى الحافظة. الرجاء النسخ يدوياً.');
                  resolve(false);
                }
              } catch (err) {
                console.error('execCommand error:', err);
                showErrorMessage('تعذر الوصول إلى الحافظة. الرجاء النسخ يدوياً.');
                resolve(false);
              }
            });
          }
          
          function showSuccessMessage(message) {
            const msg = document.createElement('div');
            msg.textContent = message;
            msg.style.cssText = 'position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: #4CAF50; color: white; padding: 10px 20px; border-radius: 4px; z-index: 1000;';
            document.body.appendChild(msg);
            setTimeout(() => msg.remove(), 3000);
          }
          
          function showErrorMessage(message) {
            alert(message);
          }
        </script>
      </section>

    </div>
            <h3><i class="fas fa-list-check"></i> الأهداف</h3>
                        <div class="goals-form">
              <input type="text" id="date" placeholder="اليوم">
              <input type="text" id="target" placeholder="المستهدفات">
              <input type="text" id="requirements" placeholder="المستلزمات">
              <input type="text" id="progress" placeholder="نسبة الإتمام">
              <button onclick="addRow()" class="add-goal-btn">
                <i class="fas fa-plus"></i> إضافة هدف
              </button>
            </div>
            <table class="goals-table">
              <thead>
                <tr>
                  <th>اليوم</th>
                  <th>المستهدفات</th>
                  <th>المستلزمات</th>
                  <th>نسبة الإتمام</th>
                  <th>الإجراءات</th>
                </tr>
              </thead>
              <tbody id="dataBody"></tbody>
            </table>
          </div>
      </div>
    </div>

    <script>
      // Update user info
      document.addEventListener('DOMContentLoaded', function() {
        const user = JSON.parse(sessionStorage.getItem('currentUser') || localStorage.getItem('rememberedUser') || '{}');
        if (user && user.name) {
          document.getElementById('userName').textContent = user.name;
          
        }

        // Logout functionality
        document.getElementById('logoutBtn').addEventListener('click', function() {
          sessionStorage.removeItem('currentUser');
          localStorage.removeItem('rememberedUser');
          window.location.href = 'login.html';
        });
      });

      // Google Sheets API URL - استبدل هذا برابط نشر التطبيق الذي حصلت عليه
      const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbz-et8sE6HzauQ80_Y2O8FoolDMXJHLG4gyNQOQzr_OJ1hRc16wM3AGktfy_hu55txb/exec';
      
      // إظهار/إخفاء مؤشر التحميل
      function showLoading(show) {
        const loading = document.getElementById('loading');
        if (loading) {
          loading.style.display = show ? 'flex' : 'none';
        }
      }
      
      // إظهار رسالة للمستخدم
      function showMessage(message, isError = false) {
        const messageDiv = document.getElementById('message');
        if (messageDiv) {
          messageDiv.textContent = message;
          messageDiv.className = isError ? 'error-message' : 'success-message';
          messageDiv.style.display = 'block';
          setTimeout(() => {
            messageDiv.style.display = 'none';
          }, 3000);
        }
      }
      
      // إرسال طلب إلى Google Sheets باستخدام JSONP
      function callGoogleScript(action, data = {}) {
        return new Promise((resolve, reject) => {
          try {
            showLoading(true);
            
            // إنشاء معرف فريد للرد
            const callbackName = 'jsonp_callback_' + Math.round(100000 * Math.random());
            
            // إضافة المعلمات إلى URL
            const params = new URLSearchParams();
            params.append('action', action);
            params.append('callback', callbackName);
            
            // إضافة البيانات إلى المعلمات
            Object.keys(data).forEach(key => {
              params.append(key, data[key]);
            });
            
            // إنشاء عنصر script
            const script = document.createElement('script');
            script.src = `${SCRIPT_URL}?${params.toString()}`;
            
            // تعريف دالة الاستدعاء
            window[callbackName] = function(response) {
              delete window[callbackName];
              document.body.removeChild(script);
              showLoading(false);
              resolve(response);
            };
            
            // معالجة الأخطاء
            script.onerror = function() {
              delete window[callbackName];
              document.body.removeChild(script);
              showLoading(false);
              showMessage('فشل في الاتصال بالخادم', true);
              reject(new Error('فشل في الاتصال بالخادم'));
            };
            
            // إضافة السكريبت للصفحة لبدء الطلب
            document.body.appendChild(script);
          } catch (error) {
            console.error('Error:', error);
            showMessage('حدث خطأ في الاتصال بالخادم', true);
            showLoading(false);
            reject(error);
          }
        });
      }
      
      // إضافة هدف جديد
      async function addRow() {
        const date = document.getElementById('date').value;
        const target = document.getElementById('target').value;
        const requirements = document.getElementById('requirements').value;
        let progress = document.getElementById('progress').value;
        
        // إضافة % إذا لم تكن موجودة
        if (progress && !progress.endsWith('%')) {
          progress += '%';
        }

        if (!date || !target || !requirements || !progress) {
          showMessage('الرجاء ملء جميع الحقول', true);
          return;
        }
        
        // إرسال البيانات إلى Google Sheets
        const result = await callGoogleScript('add', {
          date,
          target,
          requirements,
          progress
        });
        
        if (result && result.status === 'success') {
          // مسح الحقول بعد الإضافة الناجحة
          document.getElementById('date').value = '';
          document.getElementById('target').value = '';
          document.getElementById('requirements').value = '';
          document.getElementById('progress').value = '';
          
          // إعادة تحميل البيانات
          loadGoals();
          showMessage('تمت إضافة الهدف بنجاح');
        } else {
          showMessage('فشل في إضافة الهدف', true);
        }
      }
      
      async function editRow(button) {
        const row = button.closest('tr');
        const cells = row.getElementsByTagName('td');
        const id = row.getAttribute('data-id');
        
        // If already in edit mode, save changes
        if (row.classList.contains('editing')) {
          // Get edited values
          const editedData = {
            date: cells[0].querySelector('input').value,
            target: cells[1].querySelector('input').value,
            requirements: cells[2].querySelector('input').value,
            progress: cells[3].querySelector('input').value,
            id: id
          };
          
          try {
            const result = await callGoogleScript('update', editedData);
            
            if (result && result.status === 'success') {
              // Update row content
              cells[0].textContent = editedData.date;
              cells[1].textContent = editedData.target;
              cells[2].textContent = editedData.requirements;
              cells[3].textContent = editedData.progress;
              
              // Restore action buttons
              cells[4].innerHTML = `
                <button class="edit-btn" onclick="editRow(this)">
                  <i class="fas fa-edit"></i> تعديل
                </button>
                <button class="delete-btn" onclick="deleteRow(this)">
                  <i class="fas fa-trash"></i> حذف
                </button>
              `;
              
              row.classList.remove('editing');
              showMessage('تم تحديث الهدف بنجاح');
            } else {
              throw new Error('فشل في تحديث البيانات');
            }
          } catch (error) {
            console.error('Error updating goal:', error);
            showMessage('حدث خطأ أثناء تحديث الهدف', true);
          }
          return;
        }
        
        // Enter edit mode
        row.classList.add('editing');
        
        // Make cells editable
        for (let i = 0; i < 4; i++) {
          const cell = cells[i];
          const text = cell.textContent;
          cell.innerHTML = `<input type="text" value="${text}" class="editable">`;
        }
        
        // Change buttons to Save and Cancel
        cells[4].innerHTML = `
          <button class="save-btn" onclick="editRow(this)">
            <i class="fas fa-save"></i> حفظ
          </button>
          <button class="cancel-btn" onclick="cancelEdit(this)">
            <i class="fas fa-times"></i> إلغاء
          </button>
        `;
      }
      
      function cancelEdit(button) {
        const row = button.closest('tr');
        const cells = row.getElementsByTagName('td');
        
        // Restore original content
        const originalData = row._originalData || [];
        for (let i = 0; i < 4; i++) {
          cells[i].textContent = originalData[i] || '';
        }
        
        // Restore action buttons
        cells[4].innerHTML = `
          <button class="edit-btn" onclick="editRow(this)">
            <i class="fas fa-edit"></i> تعديل
          </button>
          <button class="delete-btn" onclick="deleteRow(this)">
            <i class="fas fa-trash"></i> حذف
          </button>
        `;
        
        row.classList.remove('editing');
      }
      
      async function deleteRow(button) {
        if (confirm('هل أنت متأكد من حذف هذا الهدف؟')) {
          const row = button.closest('tr');
          const id = row.getAttribute('data-id');
          
          const result = await callGoogleScript('delete', { id });
          
          if (result && result.status === 'success') {
            row.remove();
            showMessage('تم حذف الهدف بنجاح');
          } else {
            showMessage('فشل في حذف الهدف', true);
          }
        }
      }

      // تمت إزالة دالة saveGoals القديمة لأننا نستخدم Google Sheets الآن

      async function loadGoals() {
        try {
          showLoading(true);
          const response = await callGoogleScript('getAll');
          const goals = response.data || [];
          
          const tbody = document.getElementById('dataBody');
          tbody.innerHTML = '';
          
          if (goals && goals.length > 0) {
            // عكس ترتيب الأهداف لعرض الأحدث أولاً
          const reversedGoals = [...goals].reverse();
          reversedGoals.forEach((goal, index) => {
              const row = document.createElement('tr');
              row.setAttribute('data-id', goal.id || index + 1);
              // تحويل القيمة العشرية إلى نسبة مئوية إذا كانت القيمة رقمية
              let progress = goal['نسبة الإتمام'] || '';
              if (progress && !isNaN(parseFloat(progress)) && isFinite(progress)) {
                // تحويل من صيغة عشرية (مثل 0.67) إلى نسبة مئوية (67%)
                progress = (parseFloat(progress) * 100).toFixed(0) + '%';
              }
              
              row.innerHTML = `
                <td>${goal.اليوم || ''}</td>
                <td>${goal.المستهدفات || ''}</td>
                <td>${goal.المستلزمات || ''}</td>
                <td>${progress}</td>
                <td class="action-buttons">
                  <button class="edit-btn" onclick="editRow(this)">
                    <i class="fas fa-edit"></i> تعديل
                  </button>
                  <button class="delete-btn" onclick="deleteRow(this)">
                    <i class="fas fa-trash"></i> حذف
                  </button>
                </td>
              `;
              tbody.appendChild(row);
            });
          } else {
            tbody.innerHTML = '<tr><td colspan="5" style="text-align: center;">لا توجد أهداف مسجلة بعد</td></tr>';
          }
        } catch (error) {
          console.error('Error loading goals:', error);
          showMessage('حدث خطأ في تحميل الأهداف', true);
        } finally {
          showLoading(false);
        }
      }

      // إضافة أنماط إضافية
      const style = document.createElement('style');
      style.textContent = `
        #loading {
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(255, 255, 255, 0.8);
          justify-content: center;
          align-items: center;
          z-index: 1000;
        }
        .spinner {
          width: 40px;
          height: 40px;
          border: 4px solid #f3f3f3;
          border-top: 4px solid #3498db;
          border-radius: 50%;
          animation: spin 1s linear infinite;
        }
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        #message {
          display: none;
          padding: 10px 15px;
          margin: 10px 0;
          border-radius: 4px;
          text-align: center;
        }
        .success-message {
          background-color: #d4edda;
          color: #155724;
          border: 1px solid #c3e6cb;
        }
        .error-message {
          background-color: #f8d7da;
          color: #721c24;
          border: 1px solid #f5c6cb;
        }
      `;
      document.head.appendChild(style);
      
      // إضافة عناصر واجهة المستخدم الديناميكية
      document.addEventListener('DOMContentLoaded', function() {
        // إضافة مؤشر التحميل
        const loadingDiv = document.createElement('div');
        loadingDiv.id = 'loading';
        loadingDiv.innerHTML = '<div class="spinner"></div>';
        document.body.appendChild(loadingDiv);
        
        // إضافة حاوية الرسائل
        const messageDiv = document.createElement('div');
        messageDiv.id = 'message';
        const container = document.querySelector('.container');
        container.insertBefore(messageDiv, container.firstChild);
        
        // تحميل الأهداف عند تحميل الصفحة
        loadGoals();
      });
    </script>
        
    <!-- Footer -->
    <footer class="site-footer">
      <div class="footer-content">
        <div class="footer-section">
          <h4>معلومات التواصل</h4>
          <p><i class="fas fa-map-marker-alt"></i> العنوان: حي العرصة بالقرب من مسجد عثمان بن عفان</p>
          <p><i class="fas fa-phone"></i> الهاتف: 0660210500</p>
          <p><i class="fas fa-envelope"></i> البريد الإلكتروني: elbarakamosta@gmail.com</p>
        </div>
        <div class="footer-section">
          <h4>تابعنا على</h4>
          <div class="social-links">
            <a href="https://web.facebook.com/elbaraka.mostaganem" class="social-icon"><i class="fab fa-facebook"></i></a>
            <a href="https://www.instagram.com/elbaraka.mostaganem" class="social-icon"><i class="fab fa-instagram"></i></a>
            <a href="https://www.youtube.com/@elbarakahdz" class="social-icon"><i class="fab fa-youtube"></i></a>
          </div>
        </div>
      </div>
      <div class="footer-bottom" >
        <p style="text-align: center; direction: ltr;">© 2025 جميع الحقوق محفوظة - جمعية البركة للعمل الخيري والانساني</p>
      </div>
    </footer> 

    <style>
      /* Footer Styles */
      .site-footer {
        background: linear-gradient(135deg, #024e29, #03924d);
        color: #fff;
        padding: 30px 0 10px;
        margin-top: 40px;
        font-family: 'Tajawal', sans-serif;
      }
      
      .footer-content {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }
      
      .footer-section {
        flex: 1;
        min-width: 250px;
        margin: 0 15px 20px;
      }
      
      .footer-section h4 {
        color: #fff;
        margin-bottom: 20px;
        position: relative;
        padding-bottom: 10px;
      }
      
      .footer-section h4::after {
        content: '';
        position: absolute;
        right: 0;
        bottom: 0;
        width: 50px;
        height: 2px;
        background: #fdc116;
      }
      
      .footer-section ul {
        list-style: none;
        padding: 0;
      }
      
      .footer-section ul li {
        margin-bottom: 10px;
      }
      
      .footer-section ul li a {
        color: #ecf0f1;
        text-decoration: none;
        transition: all 0.3s ease;
      }
      
      .footer-section ul li a:hover {
        color: #fdc116;
        padding-right: 5px;
      }
      
      .footer-section p {
        color: #ecf0f1;
        margin: 10px 0;
        display: flex;
        align-items: center;
      }
      
      .footer-section p i {
        margin-left: 10px;
        color: #fdc116;
      }
      
      .social-links {
        display: flex;
        gap: 15px;
        margin-top: 20px;
      }
      
      .social-icon {
        color: #fff;
        background: rgba(255, 255, 255, 0.1);
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        text-decoration: none;
      }
      
      .social-icon:hover {
        background: #fdc116;
        transform: translateY(-3px);
      }
      
      .footer-bottom {
        text-align: center;
        padding: 15px 0;
        margin-top: 20px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        font-size: 14px;
        color: #ecf0f1;
      }
      
      @media (max-width: 768px) {
        .footer-section {
          flex: 100%;
          text-align: center;
          margin-bottom: 30px;
        }
        
        .footer-section h4::after {
          right: 50%;
          transform: translateX(50%);
        }
        
        .social-links {
          justify-content: center;
        }
        
        .footer-section p {
          justify-content: center;
        }
      }
    </style>
  </body>
</html>